(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[3],{11:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return j})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return d}));var n=r(3),c=Object(n.b)("contacts/fetchContactRequest"),a=Object(n.b)("contacts/fetchContactSuccess"),s=Object(n.b)("contacts/fetchContactError"),u=Object(n.b)("contacts/addContactRequest"),o=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),d=Object(n.b)("contacts/changeFilter")},113:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(21),s=r.n(a),u=r(10),o=r(6),i={home:"/",register:"/register",login:"/login",contacts:"/contacts"},b=(r(41),r(17)),j=r(16),l=(r(89),r(2));function d(){var e=Object(u.c)(j.c.getIsAuthenticated);return Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{className:"Navbar",children:[Object(l.jsx)("li",{children:Object(l.jsx)(b.b,{exact:!0,to:i.home,className:"NavLink",activeClassName:"NavLink--active",children:"Home"})}),e&&Object(l.jsx)("li",{children:Object(l.jsx)(b.b,{to:i.contacts,className:"NavLink",activeClassName:"NavLink--active",children:"Contacts"})})]})})}var O=function(){return Object(l.jsx)("div",{children:Object(l.jsxs)("ul",{className:"Navbar",children:[Object(l.jsx)("li",{children:Object(l.jsx)(b.b,{to:"/register",exact:!0,className:"NavLink",activeClassName:"NavLink--active",children:"\u0421heck in"})}),Object(l.jsx)("li",{children:Object(l.jsx)(b.b,{to:"/login",exact:!0,className:"NavLink",activeClassName:"NavLink--active",children:"Login"})})]})})},h=r.p+"static/media/default-avatar.a9d44b06.png",f=r(36),g=r.n(f),p=r(128);function v(){var e=Object(u.b)(),t=Object(u.c)(j.c.getUserName),r=Object(n.useCallback)((function(){e(j.a.logOut())}),[e]);return Object(l.jsxs)("div",{className:g.a.container,children:[Object(l.jsx)("img",{src:h,alt:"Avatar",className:g.a.avatar}),Object(l.jsxs)("span",{className:g.a.name,children:["Welcome, ",t]}),Object(l.jsx)(p.a,{type:"button",onClick:r,variant:"outlined",color:"primary",children:"Logout"})]})}var x=r(56),m=r.n(x);function C(){var e=Object(u.c)(j.c.getIsAuthenticated);return Object(l.jsxs)("header",{className:m.a.Header,children:[Object(l.jsx)(d,{}),e?Object(l.jsx)(v,{}):Object(l.jsx)(O,{})]})}var k=r(57),N=r.n(k),S=function(){return Object(l.jsx)("div",{className:"spinner-conteiner",children:Object(l.jsx)(N.a,{type:"Circles",color:"#00BFFF",height:100,width:100})})},E=r(51),y=r(25),U=r(35),A=r(26),R=["isAuthenticated","redirectTo","children"];function _(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(U.a)(e,R),c=Object(u.c)(A.a.getIsAuthenticated);return Object(l.jsx)(o.b,Object(y.a)(Object(y.a)({},n),{},{children:c?r:Object(l.jsx)(o.a,{to:t})}))}var q=["isAuthenticated","redirectTo","children"];function w(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(U.a)(e,q),c=Object(u.c)(A.a.getIsAuthenticated);return Object(l.jsx)(o.b,Object(y.a)(Object(y.a)({},n),{},{children:c&&n.restricted?Object(l.jsx)(o.a,{to:t}):r}))}var L=Object(n.lazy)((function(){return r.e(1).then(r.bind(null,136))})),z=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,137))})),I=Object(n.lazy)((function(){return r.e(2).then(r.bind(null,138))})),T=Object(n.lazy)((function(){return r.e(0).then(r.bind(null,139))}));function F(){var e=Object(u.b)();return Object(n.useEffect)((function(){console.log("useEffect \u0432\u043c\u0435\u0441\u0442\u043e  componentDidMount"),e(j.a.getCurrentUser())}),[e]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(C,{}),Object(l.jsx)(E.a,{children:Object(l.jsx)(n.Suspense,{fallback:Object(l.jsx)(S,{}),children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(w,{exact:!0,path:i.home,children:Object(l.jsx)(L,{})}),Object(l.jsx)(w,{path:i.register,restricted:!0,redirectTo:i.home,children:Object(l.jsx)(z,{})}),Object(l.jsx)(w,{path:i.login,restricted:!0,redirectTo:i.home,children:Object(l.jsx)(I,{})}),Object(l.jsx)(_,{path:i.contacts,redirectTo:i.login,children:Object(l.jsx)(T,{})})]})})})]})}var M,B,H=r(34),D=r(3),J=r(4),W=r(8),P=r(11),V=Object(D.c)([],(M={},Object(J.a)(M,P.j,(function(e,t){return t.payload})),Object(J.a)(M,P.c,(function(e,t){var r=t.payload;return e.map((function(e){return e.name})).includes(r.name)?alert("".concat(r.name," is already exist")):[].concat(Object(H.a)(e),[r])})),Object(J.a)(M,P.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),M)),G=Object(D.c)(!1,(B={},Object(J.a)(B,P.i,(function(){return!0})),Object(J.a)(B,P.j,(function(){return!1})),Object(J.a)(B,P.h,(function(){return!1})),Object(J.a)(B,P.b,(function(){return!0})),Object(J.a)(B,P.c,(function(){return!1})),Object(J.a)(B,P.a,(function(){return!1})),Object(J.a)(B,P.f,(function(){return!0})),Object(J.a)(B,P.g,(function(){return!1})),Object(J.a)(B,P.e,(function(){return!1})),B)),K=Object(D.c)("",Object(J.a)({},P.d,(function(e,t){return t.payload}))),Q=Object(W.b)({items:V,filter:K,loading:G}),X=r(59),Y=r.n(X),Z=r(20),$=r(60),ee=r.n($),te=[].concat(Object(H.a)(Object(D.d)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[Y.a]),re={key:"auth",storage:ee.a,whitelist:["token"]},ne=Object(D.a)({reducer:{auth:Object(Z.g)(re,j.b),contacts:Q},middleware:te,devTools:!1}),ce={store:ne,persistor:Object(Z.h)(ne)},ae=(r(112),r(61));s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(u.a,{store:ce.store,children:Object(l.jsx)(ae.a,{loading:null,persistor:ce.persistor,children:Object(l.jsx)(b.a,{children:Object(l.jsx)(F,{})})})})}),document.getElementById("root"))},16:function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return S})),r.d(t,"c",(function(){return E.a}));var n,c,a,s,u=r(3),o={registerRequest:Object(u.b)("auth/registerRequest"),registerSuccess:Object(u.b)("auth/registerSuccess"),registerError:Object(u.b)("auth/registerError"),loginRequest:Object(u.b)("auth/loginRequest"),loginSuccess:Object(u.b)("auth/loginSuccess"),loginError:Object(u.b)("auth/loginError"),logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},i=r(4),b=r(8),j={name:null,email:null},l=Object(u.c)(j,(n={},Object(i.a)(n,o.registerSuccess,(function(e,t){return t.payload.user})),Object(i.a)(n,o.loginSuccess,(function(e,t){return t.payload.user})),Object(i.a)(n,o.logoutSuccess,(function(){return j})),Object(i.a)(n,o.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),d=Object(u.c)(null,(c={},Object(i.a)(c,o.registerSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,o.loginSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,o.logoutSuccess,(function(){return null})),c)),O=function(e,t){return t.payload},h=Object(u.c)(null,(a={},Object(i.a)(a,o.registerError,O),Object(i.a)(a,o.loginError,O),Object(i.a)(a,o.logoutError,O),Object(i.a)(a,o.getCurrentUserError,O),a)),f=Object(u.c)(!1,(s={},Object(i.a)(s,o.registerSuccess,(function(){return!0})),Object(i.a)(s,o.loginSuccess,(function(){return!0})),Object(i.a)(s,o.getCurrentUserSuccess,(function(){return!0})),Object(i.a)(s,o.registerError,(function(){return!1})),Object(i.a)(s,o.loginError,(function(){return!1})),Object(i.a)(s,o.getCurrentUserError,(function(){return!1})),Object(i.a)(s,o.logoutSuccess,(function(){return!1})),s)),g=Object(b.b)({user:l,isAuthenticated:f,token:d,error:h}),p=r(19),v=r.n(p),x=r(27),m=r(22),C=r.n(m);C.a.defaults.baseURL="https://connections-api.herokuapp.com";var k=function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},N=function(){C.a.defaults.headers.common.Authorization=""},S={register:function(e){return function(){var t=Object(x.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(o.registerRequest()),t.prev=1,t.next=4,C.a.post("/users/signup",e);case 4:n=t.sent,k(n.data.token),r(o.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(o.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(x.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(o.loginRequest()),t.prev=1,t.next=4,C.a.post("/users/login",e);case 4:n=t.sent,k(n.data.token),r(o.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(o.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(o.logoutRequest()),e.prev=1,e.next=4,C.a.post("/users/logout");case 4:N(),t(o.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(o.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(x.a)(v.a.mark((function e(t,r){var n,c,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),c=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return k(c),t(o.getCurrentUserRequest()),e.prev=5,e.next=8,C.a.get("users/current");case 8:a=e.sent,t(o.getCurrentUserSuccess(a.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(o.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},E=r(26)},26:function(e,t,r){"use strict";t.a={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name}}},36:function(e,t,r){e.exports={container:"UserMenu_container__2zLDu",avatar:"UserMenu_avatar___a7kv",name:"UserMenu_name__1MzP1"}},41:function(e,t,r){},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(0);var n=r(58),c=r.n(n),a=r(2),s=function(e){var t=e.children;return Object(a.jsx)("div",{className:c.a.Container,children:t})}},56:function(e,t,r){e.exports={Header:"AppNavBar_Header__1cVLF"}},58:function(e,t,r){e.exports={Container:"Container_Container__1OWI-"}},89:function(e,t,r){}},[[113,5,6]]]);
//# sourceMappingURL=main.190e557b.chunk.js.map